<div class="analytics-container">
  <div class="section-header">
    <h2>Analytics Dashboard</h2>
    <p>App usage statistics and insights</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading analytics data...</p>
  </div>

  <!-- Analytics Content -->
  <div *ngIf="!isLoading && analyticsData" class="analytics-content">
    <!-- User Activity Cards -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-icon users">
          <mat-icon>people</mat-icon>
        </div>
        <div class="metric-content">
          <h3>{{ analyticsData.userActivity.totalUsers }}</h3>
          <p>Total Users</p>
          <span class="metric-change positive">+{{ analyticsData.userActivity.newUsers }} this month</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon active">
          <mat-icon>trending_up</mat-icon>
        </div>
        <div class="metric-content">
          <h3>{{ analyticsData.userActivity.activeUsers }}</h3>
          <p>Active Users</p>
          <span class="metric-change positive">Active in last 30 days</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon feedback">
          <mat-icon>feedback</mat-icon>
        </div>
        <div class="metric-content">
          <h3>{{ analyticsData.feedbackMetrics.totalFeedback }}</h3>
          <p>Total Feedback</p>
          <span class="metric-change neutral">All time submissions</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon rating">
          <mat-icon>star</mat-icon>
        </div>
        <div class="metric-content">
          <h3>{{ analyticsData.feedbackMetrics.averageRating }}/5</h3>
          <p>Average Rating</p>
          <span class="metric-change positive">User satisfaction</span>
        </div>
      </div>
    </div>

    <!-- Feedback Status Overview -->
    <div class="feedback-overview">
      <h3>Feedback Status Overview</h3>
      <div class="status-cards">
        <div class="status-card pending">
          <div class="status-header">
            <mat-icon>pending</mat-icon>
            <span>Pending</span>
          </div>
          <div class="status-content">
            <h4>{{ analyticsData.feedbackMetrics.pendingFeedback }}</h4>
            <div class="progress-bar">
              <div class="progress-fill" 
                   [style.width.%]="getFeedbackStatusPercentage('pending')"
                   [style.background-color]="getStatusColor('pending')"></div>
            </div>
            <span class="percentage">{{ getFeedbackStatusPercentage('pending') }}%</span>
          </div>
        </div>

        <div class="status-card resolved">
          <div class="status-header">
            <mat-icon>check_circle</mat-icon>
            <span>Resolved</span>
          </div>
          <div class="status-content">
            <h4>{{ analyticsData.feedbackMetrics.resolvedFeedback }}</h4>
            <div class="progress-bar">
              <div class="progress-fill" 
                   [style.width.%]="getFeedbackStatusPercentage('resolved')"
                   [style.background-color]="getStatusColor('resolved')"></div>
            </div>
            <span class="percentage">{{ getFeedbackStatusPercentage('resolved') }}%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-container">
        <h3>User Growth Trend</h3>
        <div class="chart-placeholder">
          <mat-icon>trending_up</mat-icon>
          <p>User growth chart will be implemented with chart library</p>
          <div class="chart-data">
            <div *ngFor="let label of analyticsData.userGrowth.labels; let i = index" class="data-point">
              <span class="label">{{ label }}</span>
              <span class="value">{{ analyticsData.userGrowth.data[i] }} users</span>
            </div>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <h3>Feedback Trends</h3>
        <div class="chart-placeholder">
          <mat-icon>analytics</mat-icon>
          <p>Feedback trends chart will be implemented with chart library</p>
          <div class="chart-data">
            <div *ngFor="let label of analyticsData.feedbackTrends.labels; let i = index" class="data-point">
              <span class="label">{{ label }}</span>
              <span class="value">{{ analyticsData.feedbackTrends.data[i] }} feedback</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Insights -->
    <div class="insights-section">
      <h3>Quick Insights</h3>
      <div class="insights-grid">
        <div class="insight-card">
          <mat-icon>insights</mat-icon>
          <h4>User Engagement</h4>
          <p>{{ (analyticsData.userActivity.activeUsers / analyticsData.userActivity.totalUsers) * 100 }}% of users are active</p>
        </div>
        <div class="insight-card">
          <mat-icon>speed</mat-icon>
          <h4>Response Time</h4>
          <p>Average feedback response time: 2.3 days</p>
        </div>
        <div class="insight-card">
          <mat-icon>thumb_up</mat-icon>
          <h4>Satisfaction</h4>
          <p>{{ analyticsData.feedbackMetrics.averageRating >= 4 ? 'High' : 'Good' }} user satisfaction rating</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !analyticsData" class="empty-state">
    <mat-icon>analytics</mat-icon>
    <h3>No Analytics Data</h3>
    <p>Analytics data will appear here once users start using the application.</p>
  </div>
</div> 