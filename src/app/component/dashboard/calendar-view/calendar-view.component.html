<mat-card class="demo-inline-calendar-card">
  <!-- Calendar Controls -->
  <div class="flex justify-between items-center mb-4 p-4 border-b border-gray-200">
    <div class="flex items-center space-x-4">
      <button mat-raised-button 
              [color]="!isRangeMode ? 'primary' : 'basic'"
              (click)="toggleRangeMode()">
        <mat-icon>event</mat-icon>
        Single Date
      </button>
      <button mat-raised-button 
              [color]="isRangeMode ? 'primary' : 'basic'"
              (click)="toggleRangeMode()">
        <mat-icon>date_range</mat-icon>
        Date Range
      </button>
    </div>
    
    <button mat-icon-button 
            color="warn" 
            (click)="clearSelections()"
            matTooltip="Clear selection">
      <mat-icon>clear</mat-icon>
    </button>
  </div>

  <!-- Range Selection Status -->
  <div *ngIf="isRangeMode" class="px-4 pb-4">
    <div class="flex items-center space-x-4 text-sm">
      <div class="flex items-center space-x-2">
        <span class="text-gray-600">Start:</span>
        <span *ngIf="startDate" class="font-semibold text-blue-600">
          {{ startDate | date:'MMM dd, yyyy' }}
        </span>
        <span *ngIf="!startDate" class="text-gray-400">Not selected</span>
      </div>
      <mat-icon class="text-gray-400">arrow_forward</mat-icon>
      <div class="flex items-center space-x-2">
        <span class="text-gray-600">End:</span>
        <span *ngIf="endDate" class="font-semibold text-green-600">
          {{ endDate | date:'MMM dd, yyyy' }}
        </span>
        <span *ngIf="!endDate" class="text-gray-400">Not selected</span>
      </div>
    </div>
    
    <!-- Range Summary -->
    <div *ngIf="startDate && endDate" class="mt-3 p-3 bg-blue-50 rounded-lg">
      <div class="grid grid-cols-3 gap-4 text-center">
        <div>
          <div class="text-xs text-gray-600">Income</div>
          <div class="text-sm font-bold text-green-600">₹{{ getRangeTotalIncome() | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="text-xs text-gray-600">Expenses</div>
          <div class="text-sm font-bold text-red-600">₹{{ getRangeTotalExpenses() | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="text-xs text-gray-600">Net</div>
          <div class="text-sm font-bold" [ngClass]="getRangeNetAmount() >= 0 ? 'text-blue-600' : 'text-orange-600'">
            ₹{{ getRangeNetAmount() | number:'1.2-2' }}
          </div>
        </div>
      </div>
      <div class="text-xs text-gray-500 mt-2 text-center">
        {{ rangeTransactions.length }} transactions in range
      </div>
    </div>
  </div>

  <!-- Single Date Status -->
  <div *ngIf="!isRangeMode && selectedDate" class="px-4 pb-4">
    <div class="p-3 bg-green-50 rounded-lg">
      <div class="text-sm font-semibold text-green-800">
        Selected: {{ selectedDate | date:'fullDate' }}
      </div>
      <div class="grid grid-cols-3 gap-4 mt-2 text-center">
        <div>
          <div class="text-xs text-gray-600">Income</div>
          <div class="text-sm font-bold text-green-600">₹{{ getTotalIncome() | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="text-xs text-gray-600">Expenses</div>
          <div class="text-sm font-bold text-red-600">₹{{ getTotalExpenses() | number:'1.2-2' }}</div>
        </div>
        <div>
          <div class="text-xs text-gray-600">Net</div>
          <div class="text-sm font-bold" [ngClass]="getNetAmount() >= 0 ? 'text-blue-600' : 'text-orange-600'">
            ₹{{ getNetAmount() | number:'1.2-2' }}
          </div>
        </div>
      </div>
      <div class="text-xs text-gray-500 mt-2 text-center">
        {{ selectedDateTransactions.length }} transactions
      </div>
    </div>
  </div>

  <mat-calendar 
    [dateClass]="dateClass"
    (selectedChange)="onDateSelected($event)">
  </mat-calendar>
</mat-card>

<!-- Transaction details for selected date -->
<!-- <div class="mt-4" *ngIf="selectedDate && selectedDateTransactions.length > 0">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        Transactions for {{ selectedDate | date:'fullDate' }}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content> -->
      <!-- Summary -->
      <!-- <div class="grid grid-cols-3 gap-4 mb-4">
        <div class="text-center p-3 bg-green-100 rounded-lg">
          <div class="text-sm text-gray-600">Income</div>
          <div class="text-lg font-bold text-green-600">${{ getTotalIncome() | number:'1.2-2' }}</div>
        </div>
        <div class="text-center p-3 bg-red-100 rounded-lg">
          <div class="text-sm text-gray-600">Expenses</div>
          <div class="text-lg font-bold text-red-600">${{ getTotalExpenses() | number:'1.2-2' }}</div>
        </div>
        <div class="text-center p-3" [ngClass]="getNetAmount() >= 0 ? 'bg-blue-100' : 'bg-orange-100'">
          <div class="text-sm text-gray-600">Net</div>
          <div class="text-lg font-bold" [ngClass]="getNetAmount() >= 0 ? 'text-blue-600' : 'text-orange-600'">
            ${{ getNetAmount() | number:'1.2-2' }}
          </div>
        </div>
      </div> -->

      <!-- Transaction list -->
      <!-- <div class="space-y-2">
        <div *ngFor="let transaction of selectedDateTransactions" 
             class="flex items-center justify-between p-3 border rounded-lg"
             [ngClass]="transaction.type === 'income' ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50'">
          <div class="flex items-center space-x-3">
            <div class="w-3 h-3 rounded-full" 
                 [ngClass]="transaction.type === 'income' ? 'bg-green-500' : 'bg-red-500'">
            </div>
            <div>
              <div class="font-medium">{{ transaction.payee }}</div>
              <div class="text-sm text-gray-600">{{ transaction.category }}</div>
            </div>
          </div>
          <div class="text-right">
            <div class="font-bold" 
                 [ngClass]="transaction.type === 'income' ? 'text-green-600' : 'text-red-600'">
              {{ transaction.type === 'income' ? '+' : '-' }}${{ transaction.amount | number:'1.2-2' }}
            </div>
            <div class="text-xs text-gray-500" *ngIf="transaction.notes">
              {{ transaction.notes }}
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div> -->

<!-- No transactions message -->
<!-- <div class="mt-4" *ngIf="selectedDate && selectedDateTransactions.length === 0">
  <mat-card>
    <mat-card-content class="text-center py-8">
      <div class="text-gray-500">
        <mat-icon class="text-4xl mb-2">event_busy</mat-icon>
        <p>No transactions for {{ selectedDate | date:'fullDate' }}</p>
      </div>
    </mat-card-content>
  </mat-card>
</div> -->

<!-- Loading skeleton (keep existing) -->
<!-- <div class="flex w-full overflow-hidden bg-white rounded-lg shadow-lg animate-pulse dark:bg-gray-800 mt-2" *ngIf="!isMobile">
  <div class="w-1/3 bg-gray-300 dark:bg-gray-600"></div>

  <div class="w-2/3 p-4 md:p-4">
      <h1 class="w-40 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>

      <p class="w-48 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"></p>

      <div class="flex mt-4 item-center gap-x-2">
          <p class="w-5 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
          <p class="w-5 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
          <p class="w-5 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
          <p class="w-5 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
          <p class="w-5 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></p>
      </div>

      <div class="flex justify-between mt-6 item-center">
          <h1 class="w-10 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>

          <div class="h-4 bg-gray-200 rounded-lg w-28 dark:bg-gray-700"></div>
      </div>
      <div class="flex justify-between mt-6 item-center">
        <h1 class="w-10 h-2 bg-gray-200 rounded-lg dark:bg-gray-700"></h1>

        <div class="h-4 bg-gray-200 rounded-lg w-28 dark:bg-gray-700"></div>
    </div>
  </div>
</div> -->