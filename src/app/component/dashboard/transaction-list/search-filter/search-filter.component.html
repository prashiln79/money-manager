<div class="bg-white rounded-xl border border-gray-100 shadow-sm p-4 pb-0 ">
  <!-- Header Section -->
  <div class="flex items-center justify-between mb-2">
    <div class="flex items-center space-x-4">
      <div class="flex items-center space-x-2">
        <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
        <span class="text-sm font-medium text-gray-700">
          {{ selectedYear }} Transactions
        </span>
      </div>
      <div class="flex items-center space-x-1">
        <span class="text-sm font-semibold text-gray-900">{{ filteredCount }}</span>
        <span *ngIf="filteredCount !== currentYearCount" class="text-sm text-gray-500">/ {{ currentYearCount }}</span>
      </div>
    </div>
    
    <div class="flex items-center space-x-2">
      <!-- Action Buttons -->
       
    
      <button 
      mat-stroked-button
        class=" rounded-lg transition-all duration-200 shadow-sm hover:shadow-md " 
        matTooltip="Import transactions" 
        (click)="onImportTransactions()"
      >
        <mat-icon class="text-md">file_upload</mat-icon>Import
      </button>
      <button mat-stroked-button
        class="transition-all duration-200 shadow-sm hover:shadow-md !bg-primary-500 !text-white" 
        matTooltip="Add transaction" 
        (click)="onAddTransaction()"
      >
        <mat-icon class="text-md">add</mat-icon>Add Transaction
      </button>
    </div>
  </div>

  <!-- Active Filters Indicator -->
  <div *ngIf="hasActiveFilters()" class="mb-3 pb-2 border-b border-gray-100">

    <div class="flex flex-wrap gap-1">
      <div class="flex items-center space-x-1 ml-2">
        <mat-icon class="text-blue-500 text-xs">filter_alt</mat-icon>
        <span class="text-xs text-gray-600 font-medium">Active Filters</span>
      </div>
      @for (filter of getActiveFilters(); track filter.type) {
      <mat-chip 
        [removable]="true" 
        (removed)="filter.onRemove()"
        class="bg-blue-50 text-blue-700 border-blue-200 text-xs h-6"
      >
        {{ filter.label }}
        <mat-icon matChipRemove class="text-blue-500 text-xs">cancel</mat-icon>
      </mat-chip>
      }
    </div>
  </div>

  <!-- Filters Section -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-4 w-full">
    <!-- Search Input -->
    <div >
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Search transactions...</mat-label>
        <input 
          matInput 
          [ngModel]="searchTerm"
          (ngModelChange)="onSearchChange($event)"
          placeholder="Search transactions..."
        />
        <mat-icon matSuffix class="text-gray-400 text-sm">search</mat-icon>
      </mat-form-field>
    </div>

    <!-- Year Filter -->
    <div>
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Year</mat-label>
        <mat-select [ngModel]="selectedYear" (ngModelChange)="onSelectedYearChange($event)">
          @for (year of availableYears; track year) {
          <mat-option [value]="year">
            {{ year }}
          </mat-option>
          }
        </mat-select>
        <mat-icon matSuffix class="text-gray-400 text-sm">calendar_today</mat-icon>
      </mat-form-field>
    </div>

    <!-- Month Filter -->
    <div>
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Month</mat-label>
        <mat-select [ngModel]="selectedMonthOption" (ngModelChange)="onSelectedMonthChange($event)">
          <mat-option value="all">All Months</mat-option>
          @for (month of months; track month.value) {
          <mat-option [value]="month.value">
            {{ month.label }}
          </mat-option>
          }
        </mat-select>
        <mat-icon matSuffix class="text-gray-400 text-sm">date_range</mat-icon>
      </mat-form-field>
    </div>

    <!-- Category Filter -->
    <div>
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Category</mat-label>
        <mat-select [ngModel]="selectedCategory" (ngModelChange)="onCategoryChange($event)">
          <mat-option value="all">All Categories</mat-option>
          @for (category of categories; track category.id) {
          <mat-option [value]="category.id">
            {{ category.name }}
          </mat-option>
          }
        </mat-select>
        <mat-icon matSuffix class="text-gray-400 text-sm">category</mat-icon>
      </mat-form-field>
    </div>

    <!-- Type Filter -->
    <div>
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Type</mat-label>
        <mat-select [ngModel]="selectedType" (ngModelChange)="onTypeChange($event)">
          <mat-option value="all">All Types</mat-option>
          <mat-option value="income">Income</mat-option>
          <mat-option value="expense">Expense</mat-option>
        </mat-select>
        <mat-icon matSuffix class="text-gray-400 text-sm">account_balance_wallet</mat-icon>
      </mat-form-field>
    </div>
  </div>
</div> 