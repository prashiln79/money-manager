<!-- Mobile Header -->
<div class="sticky top-0 z-20 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm">
	<div class="flex items-center justify-between px-4 py-3">
		<h6 class="text-lg font-semibold text-gray-900 dark:text-gray-100">
			{{ dialogData?.id ? 'Edit' : 'Add' }} Transaction
		</h6>
		<div class="flex items-center gap-2">
			<!-- Add Button -->
			<button 
				mat-icon-button 
				color="primary" 
				(click)="onSubmit()" 
				[disabled]="transactionForm.invalid || isSubmitting" 
				matTooltip="Save Transaction" 
				class="w-10 h-10 !bg-primary"
			>
				<mat-icon class="text-white">
					{{ isSubmitting ? 'hourglass_empty' : 'check' }}
				</mat-icon>
			</button>

			<!-- Close Button -->
			<button 
				mat-icon-button 
				type="button" 
				(click)="onClose()" 
				matTooltip="Close" 
				class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
			>
				<mat-icon>close</mat-icon>
			</button>
		</div>
	</div>
</div>

<!-- Mobile Form Content -->
<div class="flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900">
	<div class="p-4 space-y-6">
		<form [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="space-y-6">
			
			<!-- Amount Field - Prominent on Mobile -->
			<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
				<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
					Amount *
				</label>
				<input 
					type="number" 
					formControlName="amount" 
					placeholder="0.00" 
					step="0.01" 
					min="0" 
					class="w-full text-2xl font-bold text-center py-3 px-4 border-0 bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg"
				/>
				@if(getAmountError()) {
					<p class="text-red-500 text-sm mt-1">{{ getAmountError() }}</p>
				}
			</div>

			<!-- Description Field -->
			<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
				<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
					Description *
				</label>
				<input 
					type="text" 
					formControlName="payee" 
					[maxlength]="45" 
					placeholder="Enter description" 
					class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
				/>
				<div class="flex justify-between items-center mt-1">
					@if(transactionForm.get('payee')?.hasError('required') && transactionForm.get('payee')?.touched) {
						<p class="text-red-500 text-sm">Description is required</p>
					}
					<span class="text-xs text-gray-500">
						{{ transactionForm.get('payee')?.value?.length || 0 }}/45
					</span>
				</div>
			</div>

			<!-- Date Field -->
			<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
				<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
					Date *
				</label>
				<input 
					type="date" 
					formControlName="date" 
					class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
				/>
				@if(getDateError()) {
					<p class="text-red-500 text-sm mt-1">{{ getDateError() }}</p>
				}
			</div>

			<!-- Type and Category Fields -->
			<div class="grid grid-cols-2 gap-4">
				<!-- Type Field -->
				<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
					<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
						Type *
					</label>
					<select 
						formControlName="type" 
						class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
					>
						@for (item of typeList; track item) {
							<option [value]="item">{{ item | titlecase }}</option>
						}
					</select>
					@if(getTypeError()) {
						<p class="text-red-500 text-sm mt-1">{{ getTypeError() }}</p>
					}
				</div>

				<!-- Category Field -->
				<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
					<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
						Category
					</label>
					<select 
						formControlName="tag" 
						class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
					>
						@for (item of tagList; track item) {
							<option [value]="item.name">{{ item?.name }}</option>
						}
					</select>
				</div>
			</div>

			<!-- Notes Field -->
			<div class="bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm">
				<label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
					Notes
				</label>
				<textarea 
					formControlName="description" 
					[rows]="3" 
					placeholder="Add any additional notes..." 
					class="w-full py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
				></textarea>
			</div>

			<!-- Bottom Spacing for Mobile -->
			<div class="h-20"></div>
		</form>
	</div>
</div> 