<div class="accounts-container">
    <!-- Error Message Display -->
    <div *ngIf="errorMessage" 
         class="error-message mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between">
        <p class="text-red-700 text-sm">{{ errorMessage }}</p>
        <button (click)="clearError()" 
                class="text-red-500 hover:text-red-700 text-lg font-bold">
            Ã—
        </button>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isLoading" 
         class="loading-indicator flex justify-center items-center py-12">
        <mat-spinner diameter="32"></mat-spinner>
    </div>

    <!-- Main Content -->
    <div *ngIf="!isLoading" class="accounts-grid">
        
        <!-- Accounts List Section -->
        <section class="accounts-list">
            <div class="section-header">
                <h2 class="section-title">Your Accounts</h2>
                <p class="section-subtitle">{{ accounts.length }} account{{ accounts.length !== 1 ? 's' : '' }}</p>
            </div>

            <!-- Empty State -->
            <div *ngIf="accounts.length === 0" 
                 class="empty-state">
                <div class="empty-icon">ðŸ’³</div>
                <h3 class="empty-title">No accounts yet</h3>
                <p class="empty-text">Add your first account to get started</p>
            </div>

            <!-- Accounts List -->
            <div *ngIf="accounts.length > 0" class="accounts-grid-list">
                <div *ngFor="let account of accounts; trackBy: trackByAccountId"
                     class="account-item"
                     [class.positive-balance]="account.balance >= 0 && account.type !== 'loan'"
                     [class.negative-balance]="account.balance < 0 && account.type !== 'loan'"
                     [class.loan-account]="account.type === 'loan'">
                    <div class="account-content">
                        <div class="account-info">
                            <h3 class="account-name">{{ account.name }}</h3>
                            <span class="account-type">{{ account.type }}</span>
                        </div>
                        <div class="account-balance">
                            <span class="balance-amount">{{ account.balance | currency }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Add Account Form Section -->
        <section class="add-account">
            <div class="form-card">
                <div class="form-header">
                    <h2 class="form-title">Add New Account</h2>
                </div>

                <form (ngSubmit)="createAccount()" 
                      #accountForm="ngForm" 
                      class="account-form">
                    
                    <!-- Account Name Field -->
                    <div class="form-field">
                        <label class="field-label">Account Name</label>
                        <input type="text" 
                               [(ngModel)]="newAccount.name" 
                               name="accountName" 
                               required
                               placeholder="e.g., Chase Checking"
                               class="form-input"
                               maxlength="50" />
                    </div>

                    <!-- Account Type Field -->
                    <div class="form-field">
                        <label class="field-label">Account Type</label>
                        <select [(ngModel)]="newAccount.type" 
                                name="accountType" 
                                required
                                class="form-select">
                            <option value="bank">Bank Account</option>
                            <option value="cash">Cash</option>
                            <option value="credit">Credit Card</option>
                            <option value="loan">Loan</option>
                        </select>
                    </div>

                    <!-- Balance Field -->
                    <div class="form-field">
                        <label class="field-label">Initial Balance</label>
                        <input type="number" 
                               [(ngModel)]="newAccount.balance" 
                               name="accountBalance" 
                               required
                               placeholder="0.00"
                               step="0.01"
                               class="form-input"
                               min="-999999"
                               max="999999" />
                    </div>

                    <!-- Submit Button -->
                    <button type="submit"
                            [disabled]="isLoading || !accountForm.form.valid"
                            class="submit-button">
                        <span *ngIf="isLoading" class="loading-spinner"></span>
                        {{ isLoading ? 'Adding...' : 'Add Account' }}
                    </button>
                </form>
            </div>
        </section>
    </div>
</div>
